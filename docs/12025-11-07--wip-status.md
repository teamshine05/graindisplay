# 12025-11-07 work-in-progress status

## graindisplay: wayland gamma effects
- `docs/12025-11-07--wayland-gamma-plan.md` captures the full implementation roadmap for real colour effects.
- `src/wayland/effects.zig` exists and checks for `WAYLAND_DISPLAY`, but `apply`/`reset` still return `error.Unsupported`; no LUT uploads yet.
- `gsettings.Client.applyDisplay` now routes through the effects module and logs a one-time warning when gamma control is unavailable; CLI/config docs note the compositor requirement.

## zig-wayland fork (codeberg)
- Local mirror: `~/codeberg/kae3g/zig-wayland` on branch `12025-11-07--1529--pst--moon-mrigashirsha--asc-arie11--sun-08h`.
- Updated for Zig 0.15.2: `.minimum_zig_version` bumped, CI scripts (`.builds/alpine.yml`, `.builds/archlinux.yml`, `.builds/freebsd.yml`) fetch the 0.15.2 tarballs.
- Remaining step: adjust README/notes to mention 0.15.2 and push the branch.

## open TODOs
- `t6`: After resuming, run `grainwrap` and `grainvalidate` across graindisplay.
- `t7`: Finish zig-wayland integration—vendor the module, bind `wlr-gamma-control`, and stream real LUTs.

## next session checklist
1. Pull latest graindisplay repo and ensure you're on `unstable`.
2. Review `docs/12025-11-07--wayland-gamma-plan.md` for the gamma-control implementation steps.
3. Switch to `~/codeberg/kae3g/zig-wayland`, ensure branch `12025-11-07--1529--pst--moon-mrigashirsha--asc-arie11--sun-08h` is active, update README to mention Zig 0.15.2, then push to Codeberg when ready.
4. Vendor the zig-wayland fork into grainstore (via grainmirror) and point graindisplay’s build at the internal module.
5. Resume `t7`: integrate zig-wayland scanner, generate `wlr-gamma-control`, implement real LUT uploads, add manual test notes.
6. Before wrapping up, run `grainwrap` and `grainvalidate` (TODO `t6`) and ensure CI instructions mention gamma requirements.
